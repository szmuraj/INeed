@{
    ViewData["Title"] = "Wynik Ankiety";
    string title = ViewBag.FormTitle ?? "Wynik Ankiety";

    // Odbieramy wartości bezpośrednio z ViewBag, które kontroler już obliczył
    // Używamy nazw, które ustawiliśmy w QuestionnaireController.cs
    double pAch = ViewBag.PercentAchievement ?? 0;
    double pAff = ViewBag.PercentAffiliation ?? 0;
    double pAut = ViewBag.PercentAutonomy ?? 0;
    double pDom = ViewBag.PercentDominance ?? 0;
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 shadow-lg overflow-hidden" style="border-radius: 20px; background-color: #fff;">
                <div style="height: 10px; width: 100%; background: linear-gradient(90deg, #1565C0 0%, #26A69A 100%);"></div>

                <div class="card-body p-5">
                    <div class="text-center mb-5">
                        <h5 class="text-uppercase text-muted fw-bold mb-2">Profil Motywacyjny</h5>
                        <h2 class="fw-bold text-dark">@title</h2>
                        <p class="text-muted">Poniżej znajduje się analiza Twoich potrzeb zawodowych.</p>
                    </div>

                    <div class="mb-4">
                        <div class="d-flex justify-content-between align-items-end mb-1">
                            <span class="fw-bold text-uppercase" style="color: #1A2D41;">Potrzeba Osiągnięć</span>
                            <span class="fw-bold fs-5">@pAch%</span>
                        </div>
                        <div class="progress" style="height: 25px; border-radius: 12px; background-color: #F0F0F0;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                 style="width: @pAch%; background-color: #76FF03; color: black; font-weight: bold;"
                                 aria-valuenow="@pAch" aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="d-flex justify-content-between align-items-end mb-1">
                            <span class="fw-bold text-uppercase" style="color: #1A2D41;">Potrzeba Afiliacji</span>
                            <span class="fw-bold fs-5">@pAff%</span>
                        </div>
                        <div class="progress" style="height: 25px; border-radius: 12px; background-color: #F0F0F0;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                 style="width: @pAff%; background-color: #26A69A;"
                                 aria-valuenow="@pAff" aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <div class="d-flex justify-content-between align-items-end mb-1">
                            <span class="fw-bold text-uppercase" style="color: #1A2D41;">Potrzeba Autonomii</span>
                            <span class="fw-bold fs-5">@pAut%</span>
                        </div>
                        <div class="progress" style="height: 25px; border-radius: 12px; background-color: #F0F0F0;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                 style="width: @pAut%; background-color: #FFF700; color: black; font-weight: bold;"
                                 aria-valuenow="@pAut" aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </div>

                    <div class="mb-5">
                        <div class="d-flex justify-content-between align-items-end mb-1">
                            <span class="fw-bold text-uppercase" style="color: #1A2D41;">Potrzeba Dominacji</span>
                            <span class="fw-bold fs-5">@pDom%</span>
                        </div>
                        <div class="progress" style="height: 25px; border-radius: 12px; background-color: #F0F0F0;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                 style="width: @pDom%; background-color: #D32F2F;"
                                 aria-valuenow="@pDom" aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </div>

                    <hr class="my-5" style="opacity: 0.1;">

                    <div class="p-4 border border-secondary border-opacity-25 shadow-sm mb-5 mx-auto"
                         style="background-color: #F9FDF4; border-radius: 15px; max-width: 500px;">
                        <h5 class="fw-bold mb-3 text-dark text-center">Wyślij wynik na swój email</h5>

                        <form asp-action="SendResult" asp-controller="Questionnaire" method="post" class="d-flex flex-column align-items-center">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="percentAchievement" value="@pAch" />
                            <input type="hidden" name="percentAffiliation" value="@pAff" />
                            <input type="hidden" name="percentAutonomy" value="@pAut" />
                            <input type="hidden" name="percentDominance" value="@pDom" />
                            <input type="hidden" name="formTitle" value="@title" />

                            <div class="mb-3 w-75">
                                <input type="email" name="email" class="form-control bg-white text-dark border-secondary border-opacity-25 text-center"
                                       placeholder="adres@poczta.pl" required>
                            </div>

                            <button type="submit" class="btn w-75 fw-bold py-2 mb-2 shadow-sm" style="background-color: #1A2D41; color: #fff; border: none; border-radius: 10px;">
                                WYŚLIJ
                            </button>
                            <p class="small text-muted text-center mb-0" style="font-size: 0.75rem;">
                                Klikając wyślij zgadzasz się na <a href="#" class="text-decoration-underline text-primary">warunki korzystania z usługi.</a>
                            </p>
                        </form>
                    </div>

                    <div class="d-grid">
                        <a asp-controller="Home" asp-action="Index" class="btn fw-bold py-3 shadow-sm btn-outline-secondary"
                           style="border-radius: 10px; font-size: 1.1rem;">
                            &larr; WRÓĆ DO STRONY GŁÓWNEJ
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>